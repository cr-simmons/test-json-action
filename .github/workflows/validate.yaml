name: Validate JSON Files

on: [pull_request]

jobs:
  validate-json-files:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: Validate JSON Files
        run: |
          EXIT_CODE=0
          for j in *.json 
          do 
            echo "$j: Checking Formatting"
            python -mjson.tool "$j" > /dev/null && TEST_CODE=$? || TEST_CODE=$?
            if [ $TEST_CODE -ne 0 ]; then
              EXIT_CODE=$TEST_CODE
              TEST_CODE="Error"
            else
              TEST_CODE="Success"
            fi
            echo "$j: $TEST_CODE"
          done
          exit $EXIT_CODE